const images = [
    {
        name: "digital_faces",
        text: "Premio //<br>Faces of Assassination Website",
        title: "digital",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "digital_telepresencia",
        text: "Mención //<br>Telepresencia",
        title: "digital",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "digital_rediseno",
        text: "Mención //<br>Rediseno sitio web del Centro Cultural de La Moneda",
        title: "digital",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "digital_mariachi",
        text: "Mención //<br>Mariachi Gema Negra",
        title: "digital",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "desarrollo_pylonesque",
        text: "Mención //<br>Pylonesque",
        title: "interiores",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "espacios_mo",
        text: "Mención//<br>Mo de Movimiento",
        title: "interiores",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "espacios_mimm",
        text: "Mención //<br>MIMM. Museo Itinerante de la Memoria y la Identidad de Los Montes de María",
        title: "interiores",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "grafico_inor",
        text: "Premio //<br>Iñor",
        title: "grafico",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "grafico_yasuni",
        text: "Mención //<br>YASUNÍ. Cartografía sonora",
        title: "grafico",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "grafico_senaletica",
        text: "Mención //<br>Señalética Cabanas de Albeida",
        title: "grafico",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "grafico_identidadvisual",
        text: "Mención //<br>Identidad visual/familia tipográfica Museo de Arte Moderno de Buenos Aires",
        title: "grafico",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "integral_manufactura",
        text: "Premio //<br>Manufactura Nacional",
        title: "integral",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "integral_concentrico",
        text: "Mención //<br>Concéntrico, Festival Internacional de Arquitectura y Diseño de Logroño",
        title: "integral",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "integral_usule",
        text: "Mención //<br>Ù-SuLé. Casa cósmica talamanqueña",
        title: "integral",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "integral_sonidostextiles",
        text: "Mención //<br>Sonidos Textiles",
        title: "integral",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "moda_coleccion",
        text: "Premio //<br>Colección 002. Tierra",
        title: "moda",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "moda_arekuna",
        text: "Mención //<br>Serie Arekuna",
        title: "moda",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "moda_escapular",
        text: "Mención //<br>Tejido Escapular",
        title: "moda",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "moda_puna",
        text: "Mención //Puna Project",
        title: "moda",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "producto_natura",
        text: "Premio //<br>Natura",
        title: "producto",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "producto_frontera",
        text: "Mención //<br>Frontera: Enfriador portátil para agua",
        title: "producto",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "producto_aplicador",
        text: "Mención //Aplicador analgésico para recién nacido",
        title: "producto",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "producto_kit",
        text: "Mención //<br>KIT",
        title: "producto",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/categorias/desktop/",
        tags: []
    },
    {
        name: "servicios_unidaddesalud",
        text: "Premio //<br>Unidad de Salud Integral: transformando RedSalud",
        title: "servicios",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "",
        tags: []
    },
    {
        name: "servicios_upro",
        text: "Mención //<br>U-PRO",
        title: "servicios",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "",
        tags: []
    },
    {
        name: "publicaciones_conversaciones",
        text: "Premio //<br>Conversaciones sobre diseño y creatividad",
        title: "publicaciones",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/publicaciones/desktop/",
        tags: []
    },
    {
        name: "publicaciones_historia",
        text: "Mención //<br>História da Teoria da Arquitetura",
        title: "publicaciones",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/publicaciones/desktop/",
        tags: []
    },
    {
        name: "desarrollo_cobre",
        text: "Premio //<br>Cobre chileno en textiles antimicrobianos para el cuidado de la salud de bebés ",
        title: "investigacion",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/desarrollo/desktop/",
        tags: []
    },
    {
        name: "desarrollo_desarrollodemateriales",
        text: "Mención //<br>Desarrollo de materiales ligeros para aplicación en personas con discapacidad",
        title: "investigacion",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/desarrollo/desktop/",
        tags: []
    },
    {
        name: "cultura_aplicador",
        text: "Premio //<br>Aplicador analgésico para recién nacido",
        title: "cultura",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "cultura_exyone",
        text: "Mención //<br>ExyOne Shoulder",
        title: "cultura",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "cultura_cocoto",
        text: "Mención //<br>Cocoto",
        title: "cultura",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "cultura_acra",
        text: "Mención //<br>ACRA. Ampliación de las Capacidades de Respiradores Artificiales",
        title: "cultura",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "cultura_ventilador",
        text: "Mención //<br>Ventilador Pulmonar SPE1500",
        title: "cultura",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "desarrollo_manufactura",
        text: "Premio //<br>Manufactura Nacional",
        title: "desarrollo",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "desarrollo_kipi",
        text: "Mención //<br>Kipi, la niña robot eco-bilingüe",
        title: "desarrollo",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "desarrollo_pylonesque",
        text: "Mención //<br>Pylonesque",
        title: "desarrollo",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "personas_hospital",
        text: "Premio //<br>Hospital Sant Joan de Déu",
        title: "personas",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "participacion_CRIA",
        text: "Premio //<br>CRIA, experiencias de invención",
        title: "participacionciudadana",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "participacion_manuelas",
        text: "Premio //<br>LAS MANUELAS Art Series",
        title: "participacionciudadana",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "participacion_acidade",
        text: "Mención //<br>A cidade com as pessoas mais felizes do mundo",
        title: "participacionciudadana",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "participacion_diseñoactivacion",
        text: "Mención //<br>Diseño para la activación del territorio y el paisaje de la Huerta de Murcia",
        title: "participacionciudadana",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "participacion_mujeres",
        text: "Mención //<br>Mujeres con Calle",
        title: "participacionciudadana",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "sostenibilidad_coleccion",
        text: "Premio //<br>Colección Soldados de la Tierra",
        title: "sostenibilidad",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "desarrollo_manufactura",
        text: "Mención //<br>Manufactura Nacional",
        title: "sostenibilidad",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "sostenibilidad_frontera",
        text: "Mención //<br>Frontera: Enfriador portátil para agua",
        title: "sostenibilidad",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "ciudad_concentrico",
        text: "Premio //<br>Concéntrico, Festival Internacional de Arquitectura y Diseño de Logroño",
        title: "ciudad",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "ciudad_lapaz",
        text: "Premio //<br>La Paz Ciudad del Cielo",
        title: "ciudad",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "ciudad_bariloche",
        text: "Mención //<br>Marca ciudad, Bariloche",
        title: "ciudad",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "ciudad_habana",
        text: "Mención //<br>Imagen Ciudad de La Habana y Campaña por los 500 años de la ciudad.",
        title: "ciudad",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "moda_puna",
        text: "Mención //<br>Puna Project",
        title: "emprendimiento",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    },
    {
        name: "emprendimiento_gcare",
        text: "Premio //<br>GCare",
        title: "emprendimiento",
        title_path: "./assets/images/gallery/logos_categorias_SVG/",
        path: "./assets/images/gallery/especiales/desktop/",
        tags: []
    }
];
// Remember to add same number of repeated images at end of array for filling purpouses

const images_path = "./assets/images/gallery/categorias/desktop/";
var gallery_element_array = [];
var image_elements_array = [];

const images_to_display = 9
const positioning_coeficient = 50;
const scrolling_coeficient = 1000 ;
const number_total_images = images.length;
const scrolling_height = scrolling_coeficient * number_total_images;

const gallery_element = document.querySelector('.gallery');
const scrolling_element = gallery_element.querySelector('.scroll_item ')

// Set scroll item height for scrolling
scrolling_element.style.height = scrolling_height + 'px';

var last_image_title = "";

images.map(function(image, index) {

    let image_path = "./assets/images/gallery/optimized/" + image.name + ".jpg";
    let title_image_src = image.title_path + image.title + ".svg"

    let image_container_DOM =
        "<div class='image_container'>" +
            "<div class='title_image'>" +
                "<img src='" + title_image_src + "' alt='" + image.title + "' class='image_title' />" +
            "</div>" +
            "<a href='#'><img src='" + image_path + "' alt='" + image.name + "' class='main_image' /></a>" +
            "<p class='image_text'>" + image.text + "</p>" +
        "</div>";

    gallery_element.innerHTML += image_container_DOM;

}, false);

// Initializing images array, after gallery element has been loaded with all the images
image_elements_array = [...gallery_element.querySelectorAll('.image_container')];

// Positioning image container relative to bottom
const window_height = window.innerHeight;
const percent_height = window_height / 100;
const image_alignment_bottom = scrolling_height -(window_height - (5 * percent_height));

image_elements_array.map(function(element, index) {
    element.style.bottom = image_alignment_bottom + "px";
});

// // Creating and positioning scrolling dots
// const images_per_dot = 5;
// const scrolling_dots_number = number_total_images / images_per_dot;
// const scrolling_dots_container = document.querySelector('.scrolling_dots_container')
// for (let i=0; i<=scrolling_dots_number; i++) {
//     let scrolling_dot = '<div class="scrolling_dot"></div>'
//     scrolling_dots_container.innerHTML += scrolling_dot;
// }

// function to position visible elements
var position_elements = function(counter) {

    // variables
    let last_image_title = "";

    image_elements_array.map(function(element, index) {

        let move_coeficient = positioning_coeficient * index;
        let counter_coeficient = positioning_coeficient * counter;
        let x_coeficient = 3;
        let y_coeficient = -19;
        let z_coeficient = -1;
        let move_x = move_coeficient * x_coeficient - counter_coeficient * x_coeficient;
        let move_y = move_coeficient * y_coeficient - counter_coeficient * y_coeficient;
        let move_z = move_coeficient * z_coeficient - counter_coeficient * z_coeficient;

        if (counter >= 0) {
            gsap.to(element, {
                x: move_x,
                y: move_y,
                z: move_z
            });
        }

        // hide / show first element
        if (index < counter)  {
            element.classList.add('hide');
        }  else {
            element.classList.remove('hide');
        }

        // hide / show repeated title image
        let image_title_element = element.querySelector('.title_image img');
        let image_title = image_title_element.getAttribute('alt');
        if (image_title == last_image_title) image_title_element.classList.add('hide');

        // When element first in view -> show
        let element_index = image_elements_array.indexOf(element);
        if (element_index == counter) image_title_element.classList.remove('hide');

        // Storing last image title for later comparison
        last_image_title = image_title;
    });
}

// initial positioning
position_elements(0);


//
// SCROLLING
//

// 1) Variables
let scroll_counter = 0;
var ticker = 0;
var last_ticker = 0;
var visibles_array = [];

// 2) Function
$('.gallery').mousewheel(function(event, delta) {

    if (delta < 0) scroll_counter++;
    else scroll_counter--;

    if ((scroll_counter % 75 == 0) && (delta < 0) && (ticker < image_elements_array.length - 1)) ticker++;
    else if ((scroll_counter % 75 == 0) && (delta > 0) && (ticker >= 0)) ticker--;

    console.log(ticker);
    if(last_ticker != ticker && ((ticker >= 0) || (ticker <= gallery_element_array))) {
            position_elements(ticker);
    }

    last_ticker = ticker
});